package main

import (
	"context"
	"fmt"
	"log"

	"github.com/alfianX/hommypay_trx/helper"
	"github.com/alfianX/hommypay_trx/internal/app"
)

func main() {
	if err := run(context.Background()); err != nil {
		log.Fatalf("%+v", err)
	}
}

func run(ctx context.Context) error {
	server, err := app.NewServer()
	if err != nil {
		return err
	}

	data, _ := helper.HSMDecrypt("103.135.5.53:3501", "U28A99A9051BBD56A3FAA1919BB9428AA", "5085B6A7D9F275C0A403FE7954A5845A117EC91EB1A196EA7EB336420C6DBA8FD1B7CE6ABF1E169FA5C220E0727736D70E4992650BD2523E16DFB9FBEEC0F8E1135B7BBB6411EB50F746CDD9BE9FFBDE382119D978685B51F9A4C9E031E43E06AE91EBCB9476D6870C746A9540E9DB9CE0A7C1E180BA1ECAA8EEAF79B009EDE6CA73E1E95ACD5F184A357C1C17B0349D70E9C98E4F5CBA7270E9C98E4F5CBA7270E9C98E4F5CBA7276615824C1E04ADE35693F01B68CF31A79520F2B5675C80F4F2053202709C50E70E9C98E4F5CBA7270E9C98E4F5CBA7270E9C98E4F5CBA7270E9C98E4F5CBA7249318726DB582C26F4C823707E712863149988536EB85ED57018B3FAA9D0232919AAAB14C59184BB5C8DDA8AFF991F5FFC95EEA70A9C4E596CA3695C2AB4ED969003208AE62A475018332E95544CCBA43E70343557B62C6AAB1FDAAF919F6B732E3FFBAD4FB6DB825D0A600B99369F7AC3B30E334D4055DDAD30C65FCE8FE798600EC09A72783B2A59EC3FD850FF0F6F860D3887502F90C49798F5E242A6CBD79A7EEAB21E3060056D5FC5221BCD7D9D0AA57AF50EF59F9743A796DFF35A17BB")
	fmt.Println(data)

	err = server.Run(ctx)
	return err
}